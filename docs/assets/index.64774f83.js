/* empty css                  *//* empty css                     */import{d as c,G as V,u as T,b as S,r as $,f as x,g as M,E as y,h as I,i as q,j as G,o as F,c as A,k as h,e as s,l as i,w as L,m as w,n as N,p as m,t as R,q as z,s as B,v as U,x as j,y as O,z as P,A as b,B as H,C as J}from"./index.a9c518bb.js";import{s as K}from"./index.c4b51ff8.js";import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";const Q=l=>K.post("/login",{username:"admin",password:123456}),W=/^(((13[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(17[3-8]{1})|(18[0-9]{1})|(19[0-9]{1})|(14[5-7]{1}))+\d{8})$/,X=/^\d{6}$/,Y=(l,u,o)=>{u||o(new Error("\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801")),W.test(u)?o():o(new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801"))},Z=(l,u,o)=>{u||o(new Error("\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801")),X.test(u)?o():o(new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u9A8C\u8BC1\u7801"))};const ee={class:"from-wrap"},oe=m("\u767B\u5F55"),te=m("\u767B\u5F55"),ue=m("\u91CD\u7F6E"),ae=c({name:"LoginFrom"}),se=c({...ae,props:{checked:{type:Boolean,default:!0}},setup(l){const u=l,o=V();T();const g=S(),r=$(),t=x({isLoading:!1,ruleForm:{account:"",msgCode:""},rules:{account:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",trigger:"blur"},{validator:Y,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7",trigger:"blur"}],msgCode:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",trigger:"blur"},{validator:Z,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u9A8C\u8BC1\u7801",trigger:"blur"}]},isGetMSC:!1,msgCodeTime:0}),p=async a=>{try{const{data:e}=await Q(t.ruleForm);if(!e.data)throw"\u83B7\u53D6token\u5931\u8D25";o.setToken(e.data),g.replace({path:"/home"})}catch(e){console.log(e)}},_=a=>{!a||a.resetFields()},D=async a=>{const e=new Date().getTime();try{if(t.isGetMSC){B({title:"\u6E29\u99A8\u63D0\u793A\uFF1A",duration:2e3,message:"\u9A8C\u8BC1\u7801\u4E94\u5206\u949F\u5185\u6709\u6548\uFF01",type:"info"});return}if(!a)throw"DOM Element undefined";await a.validateField("account",n=>{if(!n)throw"\u6821\u9A8C\u5931\u8D25"}),o.setMsgCodeTime(e+1e3*60*5),t.isGetMSC=!0,C(e),B({title:"\u63D0\u793A\uFF1A",duration:2e3,message:"\u9A8C\u8BC1\u7801\u5DF2\u901A\u8FC7\u77ED\u4FE1\u63A8\u9001\uFF0C\u4E94\u5206\u949F\u5185\u6709\u6548\uFF01",type:"success"})}catch(n){console.log(n)}},C=a=>{t.msgCodeTime=parseInt(String((o.msgCodeTime-a)/1e3));let e=null;e&&clearInterval(e),e=setInterval(()=>{t.msgCodeTime--,o.setMsgCodeTime(o.msgCodeTime-1e3),t.msgCodeTime<1&&(clearInterval(e),t.isGetMSC=!1)},1e3)};return M(()=>{const a=new Date().getTime();t.isGetMSC=o.msgCodeTime&&a<o.msgCodeTime,t.isGetMSC&&C(a)}),(a,e)=>{const n=y,v=I,f=q,E=G;return F(),A("div",ee,[h(a.$slots,"title",{},void 0,!0),s(n,{type:"primary",onClick:e[0]||(e[0]=d=>p()),class:"btn-style"},{default:i(()=>[oe]),_:1}),L(s(E,{ref_key:"ruleFormRef",ref:r,model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"80px",class:"demo-ruleForm","label-position":"left"},{default:i(()=>[s(f,{label:"\u624B\u673A\u53F7:",prop:"account"},{default:i(()=>[s(v,{modelValue:t.ruleForm.account,"onUpdate:modelValue":e[2]||(e[2]=d=>t.ruleForm.account=d),type:"tel",autocomplete:"off","prefix-icon":w(N),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},{append:i(()=>[s(n,{loading:t.isLoading,onClick:e[1]||(e[1]=d=>D(r.value)),class:"get-code-style"},{default:i(()=>[m(R(t.isGetMSC?t.msgCodeTime:"\u83B7\u53D6\u9A8C\u8BC1\u7801"),1)]),_:1},8,["loading"])]),_:1},8,["modelValue","prefix-icon"])]),_:1}),s(f,{label:"\u9A8C\u8BC1\u7801:",prop:"msgCode"},{default:i(()=>[s(v,{modelValue:t.ruleForm.msgCode,"onUpdate:modelValue":e[3]||(e[3]=d=>t.ruleForm.msgCode=d),type:"tel",autocomplete:"off","prefix-icon":w(z),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},null,8,["modelValue","prefix-icon"])]),_:1}),s(f,{"label-width":"0"},{default:i(()=>[s(n,{type:"primary",onClick:e[4]||(e[4]=d=>p(r.value)),class:"btn-style",disabled:!u.checked},{default:i(()=>[te]),_:1},8,["disabled"]),s(n,{onClick:e[5]||(e[5]=d=>_(r.value)),class:"btn-style"},{default:i(()=>[ue]),_:1})]),_:1})]),_:1},8,["model","rules"]),[[U,!1]]),h(a.$slots,"footer",{},void 0,!0)])}}});var ie=k(se,[["__scopeId","data-v-3ed6500c"]]);const le=b("div",null," Lorem ipsum dolor sit amet consectetur, adipisicing elit. Animi aliquid atque, quis repellat voluptatem illo! Eligendi corporis quam et, quo maiores, recusandae at consectetur veniam tenetur magnam consequuntur tempora nulla? ",-1),re={class:"dialog-footer"},ne=m("\u5DF2\u9605"),de=c({name:"ServiceAgreement"}),ce=c({...de,props:{dialogVisible:{type:Boolean,default:!1}},emits:["updateDialogVisible"],setup(l,{emit:u}){const o=()=>{u("updateDialogVisible")};return(g,r)=>{const t=y,p=j;return F(),O(p,{modelValue:l.dialogVisible,"onUpdate:modelValue":r[0]||(r[0]=_=>P(dialogVisible)?dialogVisible.value=_:null),title:"\u670D\u52A1\u534F\u8BAE",width:"50%",onClose:o},{footer:i(()=>[b("span",re,[s(t,{type:"primary",onClick:o},{default:i(()=>[ne]),_:1})])]),default:i(()=>[le]),_:1},8,["modelValue"])}}});const me=l=>(H("data-v-852b3018"),l=l(),J(),l),pe={class:"login-wrap"},ge=me(()=>b("div",{class:"footer-wrap"},null,-1)),_e=c({name:"login"}),fe=c({..._e,setup(l){const u=x({checked:!0,showDialog:!1,options:{time:1e3}}),o=()=>{u.checked=!0,u.showDialog=!1};return(g,r)=>(F(),A("div",pe,[s(ie,{checked:u.checked},{footer:i(()=>[ge]),_:1},8,["checked"]),s(ce,{dialogVisible:u.showDialog,onUpdateDialogVisible:o},null,8,["dialogVisible"])]))}});var we=k(fe,[["__scopeId","data-v-852b3018"]]);export{we as default};
